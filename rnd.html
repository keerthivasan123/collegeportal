<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, maximum-scale=1">

	<title>Homepage</title>
	<link rel="icon" href="favicon.png" type="image/png">
	<link rel="shortcut icon" href="favicon.ico" type="img/x-icon">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
	<link
		href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,800italic,700italic,600italic,400italic,300italic,800,700,600'
		rel='stylesheet' type='text/css'>
		<link href="https://fonts.googleapis.com/css?family=Josefin+Sans&display=swap" rel="stylesheet">
	<link href="css/bootstrap.css" rel="stylesheet" type="text/css">
	<link href="css/style.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
		integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
	<link href="css/responsive.css" rel="stylesheet" type="text/css">
	<link href="css/magnific-popup.css" rel="stylesheet" type="text/css">
	<link href="css/animate.css" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Bitter" rel="stylesheet">
	<script type="text/javascript" src="js/jquery.1.8.3.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.js"></script>
	<script type="text/javascript" src="js/jquery-scrolltofixed.js"></script>
	<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
	<script type="text/javascript" src="js/jquery.isotope.js"></script>
	<script type="text/javascript" src="js/wow.js"></script>
	<script type="text/javascript" src="js/classie.js"></script>
	<script type="text/javascript" src="js/magnific-popup.js"></script>
	<script src="contactform/contactform.js"></script>

</head>

<body>

	<div style="position:fixed; left:0; right:0; display: flex; flex-direction: column;">

		<div class="shadow"
			style="position: fixed; top:0; left:0; right:0; height:100px; overflow-x: auto; overflow-y: hidden;">
			<ul class="compact-nav">
				<li><a href="index.html" class="ml-5">Home</a></li>
				<li><a href="about.html">About Us</a></li>
				<li><a href="faculty.html">Faculty</a></li>
				<li><a href="lab.html">Lab</a></li>

				<li><a href="http://stjosephs.ac.in"><img src="img/emblem.jpg" width="50" alt=""></a></li>

				<li><a href="placements.html">Placement</a></li>
				<li><a href="rnd.html">R&D</a></li>
				<li><a href="academics.html">Academics</a></li>
				<li><a href="activities.html" class="mr-5">Activities</a></li>
			</ul>
		</div>

		<!-- <nav class="main-nav-outer" id="test">
			
			<div class="fluid-container">
				<ul class="main-nav">
					<li><a href="http://stjosephs.ac.in/index.html">Home</a></li>
					<li><a href="#about">About Us</a></li>
					<li><a href="#faculty">Faculty</a></li>
					<li><a href="#">Students</a></li>

					<li class="small-logo"><a href="#header"><img src="img/emblem.jpg" width="50" alt=""></a></li>

					<li><a href="#">Placement</a></li>
					<li><a href="#">Lab</a></li>
					<li><a href="#academics">R&D</a></li>
					<li><a href="alumni.html">Alumni</a></li>

					<li><a href="#contact">Contact</a></li>
				</ul>
				<a class="res-nav_click" href="#"><i class="fa fa-bars"></i></a>
			</div>
		</nav> -->

		<div class="row m-0" style="position: fixed; top:100px; left:0; right:0; bottom:0;">
			<div class="col-2 p-0 m-0 bg-primary d-none d-md-block">
				<div class="row m-0 py-4">
					<a class="col-12 text-light p-3 ripple" href="#sponsored-proposals">Sponsored Proposals</a>
					<a class="col-12 text-light p-3 ripple" href="#research-publications">Research Publications</a>
					<a class="col-12 text-light p-3 ripple" href="#ipr">IPR</a>
					<a class="col-12 text-light p-3 ripple" href="#fdtp">FDTP Organized</a>
					<a class="col-12 text-light p-3 ripple" href="#Copyright">Copyright</a>
				</div>
			</div>
			<div class="col-lg-2 col-sm-12 p-0 m-0 bg-primary d-block d-md-none" style="overflow-x:auto;">
				<div class="m-0 p-0" style="display:flex; flex-wrap: nowrap;">
					<a class="text-light p-3" href="#sponsored-proposals">Sponsored&nbsp;Proposals</a>
					<a class="text-light p-3" href="#research-publications">Research Publications</a>
					<a class="text-light p-3" href="#ipr">IPR</a>
					<a class="text-light p-3" href="#fdtp">FDTP Organized</a>
					<a class="text-light p-3" href="#Copyright">Copyright</a>
				</div>
			</div>
			<div class="col-12 col-md-10 scrollable">
				<div>
					<h1 class="m-4 mt-5 text-dark">Research and Developement</h1>
					<section class="p-4" id="sponsored-proposals">
						<h2 class="text-left">Sponsored Proposals</h2>
						<table   class="table">
							<thead>
								<tr>
									<th scope="col">#</th>
									<th scope="col">Project</th>
									<th scope="col">Funding Agency</th>
									<th scope="col">Amount</th>
									<th scope="col">Coordinators</th>
									<th scope="col">Year</th>
									<th scope="col">Status</th>
								</tr>
							</thead>
							<tbody id="sponsored-proposals-body">
								<tr>
									<td colspan="7" class="text-center">
										<div class="text-center spinner-grow text-primary" role="status">
											<span class="sr-only">Loading...</span>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</section>
					<section class="p-4" id="research-publications">
						<h2 class="text-left">Research Publications</h2>
						<div class="accordion" id="publications-container">
							<div class="text-center">
								<div class="text-center spinner-grow text-primary" role="status">
									<span class="sr-only">Loading...</span>
								</div>
							</div>
						</div>
					</section>
					<section class="p-4" id="ipr">
						<h2 class="text-left">Intellectual Property Rights</h2>
						<table class="table">
							<thead>
								<tr>
									<th scope="col">Patent</th>
									<th scope="col">Title</th>
									<th scope="col">Inventors</th>
									<th scope="col">Filing Date</th>
									<th scope="col">Published Date</th>
								</tr>
							</thead>
							<tbody id="patents-body">
								<tr>
									<td colspan="7" class="text-center">
										<div class="text-center spinner-grow text-primary" role="status">
											<span class="sr-only">Loading...</span>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</section>
						<section class="p-4" id="Copyright">
						<h2 class="text-left">Copyright</h2>
						<table class="table">
							<thead>
								<tr>
									<th scope="col">Copyright</th>
									<th scope="col">Title</th>
									<th scope="col">Inventors</th>
									<th scope="col">Filing Date</th>
									<th scope="col">Category</th>
								</tr>
							</thead>
							<tbody id="copyrights-body">
								<tr>
									<td colspan="7" class="text-center">
										<div class="text-center spinner-grow text-primary" role="status">
											<span class="sr-only">Loading...</span>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</section>
					<section class="p-4" id="fdtp">
						<h2 class="text-left">FDTP Organized</h2>
						<table class="table">
							<thead>
								<tr>
									<th scope="col">Year</th>
									<th scope="col">Name of workshop/FDP</th>
									<th scope="col">Dates</th>
									<th scope="col">Sponsored/Approved by</th>
									<th scope="col">Coordinators</th>
								</tr>
							</thead>
							<tbody id="fdtp-body">
								<tr>
									<td colspan="7" class="text-center">
										<div class="text-center spinner-grow text-primary" role="status">
											<span class="sr-only">Loading...</span>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</section>
				</div>
			</div>
		</div>

	</div>

	<!-- <footer class="footer">
		<div class="container">
			<div class="footer-logo"><a href="#"><img src="img/footer-logo.png" alt=""></a></div>
			<span class="copyright">&copy;&nbsp;St Joseph's College Of Engineering IT Department</span>
			<div class="credits">
			</div>
		</div>
	</footer> -->


	<script type="text/javascript">
		$(document).ready(function (e) {

			$('#test').scrollToFixed();
			$('.res-nav_click').click(function () {
				$('.main-nav').slideToggle();
				return false

			});

			$('.Portfolio-box').magnificPopup({
				delegate: 'a',
				type: 'image'
			});

		});
	</script>

	<script>
		wow = new WOW({
			animateClass: 'animated',
			offset: 100
		});
		wow.init();
	</script>


	<script type="text/javascript">
		$(window).load(function () {

			$('.main-nav li a, .servicelink').bind('click', function (event) {
				var $anchor = $(this);

				$('html, body').stop().animate({
					scrollTop: $($anchor.attr('href')).offset().top - 102
				}, 1500, 'easeInOutExpo');
				/*
				if you don't want to use the easing effects:
				$('html, body').stop().animate({
					scrollTop: $($anchor.attr('href')).offset().top
				}, 1000);
				*/
				if ($(window).width() < 768) {
					$('.main-nav').hide();
				}
				event.preventDefault();
			});
		})
	</script>

	<script type="text/javascript">
		$(window).load(function () {


			var $container = $('.portfolioContainer'),
				$body = $('body'),
				colW = 375,
				columns = null;


			$container.isotope({
				// disable window resizing
				resizable: true,
				masonry: {
					columnWidth: colW
				}
			});

			$(window).smartresize(function () {
				// check if columns has changed
				var currentColumns = Math.floor(($body.width() - 30) / colW);
				if (currentColumns !== columns) {
					// set new column count
					columns = currentColumns;
					// apply width to container manually, then trigger relayout
					$container.width(columns * colW)
						.isotope('reLayout');
				}

			}).smartresize(); // trigger resize to set container width
			$('.portfolioFilter a').click(function () {
				$('.portfolioFilter .current').removeClass('current');
				$(this).addClass('current');

				var selector = $(this).attr('data-filter');
				$container.isotope({
					filter: selector,
				});
				return false;
			});

		});
	</script>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"
		integrity="sha256-S1J4GVHHDMiirir9qsXWc8ZWw74PHHafpsHp5PXtjTs=" crossorigin="anonymous"></script>

	<script>

		var url = "https://script.google.com/macros/s/AKfycbwx7jDET8HdeA0B8mnGef0zMM0VP_FpfGSnLw105BJwSyhkBmO2/exec";

		var sponsoredProposalsBuilder = (record) => {
			return `
				<tr>
					<th scope="row"><b>${record['SNo']}</b></th>
					<b><td>${record['Title']}</td></b>
					<td><b>${record['Funding Agency']}</b></td>
					<td><b>â‚¹${record['Amount']}/-</b></td>
					<td><b>${record['Coordinators']}</b></td>
					<td><b>${record['Duration']}</b></td>
					<td><b>${record['Status']}</b></td>
				</tr>
				
			`;
		}

		var patentsBuilder = (record) => {
			return `
				<tr>
					<th scope="row"><b>${record['No']}</b></th>
					<td><b>${record['Title']}</b></td>
					<td><b>${record['Inventors']}</b></td>
					<td><b>${record['Filing Date']}</b></td>
					<td><b>${record['Published Date']}</b></td>
				</tr>
			`;
		}

		var copyrightsBuilder = (record) => {
			return `
				<tr>
					<th scope="row"><b>${record['No']}</b></th>
					<td><b>${record['Title']}</b></td>
					<td><b>${record['Inventors']}</b></td>
					<td><b>${record['Filing Date']}</b></td>
					<td><b>${record['Category']}</b></td>
				</tr>
			`;
		}

		var publicationBuilder = (record) => {
			return `
				<li class="text-dark py-3">
					<b style="font-family: 'Josefin Sans', sans-serif;">
						${record['Staff']}
					</b>
					<b>
					${record['Other Authors']}
					</b> 
					| ${record['Type']} &nbsp;

					<span class="badge badge-pill badge-primary">${record['Tags'].trim()}</span>				
					<br>

					<span>
						<b>${record['Title']}</b> 
					</span>
					<br>

					<i>
						<b>${record['Published In']}</b><br>
						${record['Number']}
					</i>
				</li>
			`;
		}

		var fdtpBuilder = (record) => {
			// Replace regular hyphen by non breaking hyphen
			return `
				<tr>
				
					<th scope="row">${record['Year'].replace(/-/g, '&#8209;')}</th>
				 	<td><b>${record['Name']}</b></td>
					<td><b>${record['Dates']}</b></td>
					<td><b>${record['Sponsor']}</b></td>
					<td><b>${record['Coordinators']}</b></td>
				
				</tr>
			`;
		}

		axios.get(url + '?SponsoredProposals')
			.then(e => {
				
				document
					.getElementById('sponsored-proposals-body')
					.innerHTML = e.data.map(sponsoredProposalsBuilder).join('');
			});

		axios.get(url + '?Patents')
			.then(e => {
				document
					.getElementById('patents-body')
					.innerHTML = e.data.map(patentsBuilder).join('');
			});

		axios.get(url + '?Copyrights')
			.then(e => {
				document
					.getElementById('copyrights-body')
					.innerHTML = e.data.map(copyrightsBuilder).join('');
			});

		axios.get(url + '?Publications')
			.then(e => {
				console.log(e);
				var allRecords = e.data;

				var yearWiseData = {} ;

				for (var key in allRecords) {
					
					var record = allRecords[key];
					var year = record['Year'];
					yearWiseData[year] = yearWiseData[year] || [];
					// alert(record)
					// alert(year)
					// alert(yearWiseData[year])
					yearWiseData[year].push(record);
					//console.log(yearWiseData[year]);
				}

				document
					.getElementById('publications-container').innerHTML = "";

				var stringBuffer = ""
				for (var key in yearWiseData) {
					stringBuffer += (
						`
							<div class="card">
								<div class="card-header" id="headingOne">
									<h2 class="mb-0 text-left">
											<a href="#year${key}" class="btn btn-link" type="button" data-toggle="collapse"
											style="text-decoration:none">
											<b class="text-black" >Academic year ${key}</b>
										</a>
									</h2>
								</div>

								<div id="year${key}" class="collapse" aria-labelledby="headingOne"
									data-parent="#publications-container">
									<div class="card-body">
										<ol>
											${yearWiseData[key].map(publicationBuilder).join('')}
										</ol>
									</div>
								</div>
							</div>`
					);
				}
				document.getElementById('publications-container').innerHTML = stringBuffer;
			});

		axios.get(url + '?FDTP')
			.then(e => {
				document
					.getElementById('fdtp-body')
					.innerHTML = e.data.map(fdtpBuilder).join('');
			});

	</script>

</body>

</html>